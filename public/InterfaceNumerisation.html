<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Inclure Tailwind CSS depuis un CDN -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"> 
  <style>
    /* Styles personnalisés pour la page */
    .scan-button {
      background-color: #4CAF50;
    }
  </style>
</head>
<body class="bg-gray-100 h-screen flex items-center justify-center">
  <div class="bg-white p-8 rounded shadow-md w-96">
    <h1 class="text-2xl font-semibold mb-4">Interface de Numérisation</h1>

    <!-- Bouton de numérisation -->
    <button id="scanButton" class="scan-button hover:bg-green-700 text-white font-semibold py-2 px-4 rounded mt-2">
      Scanner le code QR
    </button>
     <!-- Conteneur pour la caméra (élément <video>) -->
      <video id="yourScannerContainer" style="width: 100%; height: 300px;"></video>


    <div id="yourScannerContainer" style="width: 100%; height: 300px;"></div>
    <div id="scanResult">Résultat de la numérisation : </div>
  </div>

  <!--script src="src/instascan.min.js"></script-->
  <script type="text/javascript" src="src/instascan.min.js"></script>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/3.3.3/adapter.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.min.js"></script>
  <!--script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script-->

  <script src="https://gist.githubusercontent.com/brunoinds/4466253d4ec667280074c6aa3bd2dd19/raw/871a09d0533fab04651de05a0d0e994f547ae60b/instascan.min.js"></script>
  <script>
    const scanButton = document.getElementById('scanButton');
    const scanResult = document.getElementById('scanResult');

    let scanner = null;

    // Fonction pour démarrer le scanner Instascan
    async function startScanner() {
      try {
        const cameras = await Instascan.Camera.getCameras();
        if (cameras.length > 0) {
          scanner = new Instascan.Scanner({ video: document.getElementById('yourScannerContainer') });
          scanner.addListener('scan', function (content) {
            scanResult.textContent = 'Résultat : ' + content;
            stopScanner();
            // Effectuez ici toute autre action nécessaire après la numérisation.
          });
          scanner.start(cameras[0]); // Vous pouvez changer l'index pour sélectionner la caméra arrière.
        } else {
          console.error('Aucune caméra disponible.');
          scanResult.textContent = 'Aucune caméra disponible.';
        }
      } catch (error) {
        console.error('Impossible d\'accéder à la caméra :', error);
        scanResult.textContent = 'Impossible d\'accéder à la caméra : ' + error;
      }
    }

    // Fonction pour arrêter le scanner
    function stopScanner() {
      if (scanner) {
        scanner.stop();
      }
    }

    scanButton.addEventListener('click', () => {
      startScanner();
    });
  </script>
</body>
</html>

<!--DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouvrir la caméra</title>
</head>
<body>
    <button id="ouvrirCamera">Caméra</button>
    <video id="cameraVideo" autoplay playsinline></video>

    <script>
        const ouvrirCameraButton = document.getElementById("ouvrirCamera");
        const cameraVideo = document.getElementById("cameraVideo");

        ouvrirCameraButton.addEventListener("click", async () => {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                cameraVideo.srcObject = stream;
            } catch (error) {
                console.error("Impossible d'accéder à la caméra :", error);
            }
        });
    </script>
    <script>
  const ouvrirCameraButton = document.getElementById("ouvrirCamera");
const cameraVideo = document.getElementById("cameraVideo");

ouvrirCameraButton.addEventListener("click", async () => {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
        cameraVideo.srcObject = stream;
    } catch (error) {
        console.error("Impossible d'accéder à la caméra arrière :", error);
    }
});
</script>    
</body>
</html>
